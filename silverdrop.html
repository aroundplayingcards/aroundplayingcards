<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Silverdrop | Around Playing Cards</title>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { font-family: 'Space Grotesk', sans-serif; background: #111; color: #fff; margin:0; }
    header { display: flex; justify-content: space-between; align-items: center; padding: 20px 40px; background: rgba(0,0,0,0.8); position: sticky; top: 0; z-index: 999; }
    .logo { font-size: 1.5rem; font-weight: 700; text-transform: uppercase; }
    nav a { color: #fff; margin-left: 30px; text-decoration: none; position: relative; transition: color 0.3s; }
    nav a:hover { color: #00bcd4; }
    .deck-detail-main { max-width: 1000px; margin: 60px auto 40px auto; background: rgba(24,24,24,0.92); border-radius: 18px; box-shadow: 0 8px 48px #0005; padding: 40px 32px; display: flex; gap: 40px; flex-wrap: wrap; }
    .deck-images { flex: 1.2; min-width: 320px; }
    .deck-images img { width: 100%; max-width: 340px; border-radius: 14px; box-shadow: 0 4px 32px #0008; margin-bottom: 16px; background: #222; }
    .deck-thumbs { display: flex; gap: 10px; }
    .deck-thumbs img { width: 60px; height: 80px; border-radius: 6px; cursor: pointer; opacity: 0.8; border: 2px solid transparent; transition: border 0.2s, opacity 0.2s; }
    .deck-thumbs img.selected, .deck-thumbs img:hover { border: 2px solid #00bcd4; opacity: 1; }
    .deck-info { flex: 2; min-width: 320px; display: flex; flex-direction: column; gap: 12px; }
    h1 { color: #00bcd4; font-size: 2.2rem; margin-bottom: 8px; }
    .deck-desc { font-size: 1.15rem; color: #c0c0c0; margin-bottom: 10px; }
    .deck-features { font-size: 1.05rem; color: #fff; list-style: disc inside; margin-bottom: 16px; }
    .deck-price { font-size: 1.3rem; color: #00bcd4; font-weight: bold; margin-bottom: 18px; }
    .add-to-cart { background: linear-gradient(90deg,#00bcd4,#c0c0c0); color: #222; font-weight: 700; border: none; border-radius: 8px; box-shadow: 0 2px 12px #00bcd444; padding: 14px 0; font-size: 1.1rem; cursor: pointer; margin-bottom: 18px; }
    .add-to-cart:hover { background: linear-gradient(90deg,#fff,#00bcd4); color: #000; }
    .deck-video { margin: 24px 0; }
    .deck-video iframe { width: 100%; max-width: 480px; height: 270px; border-radius: 12px; border: none; }
    .mission-section { background: rgba(0,188,212,0.08); border-left: 6px solid #00bcd4; border-radius: 12px; padding: 24px 24px 18px 24px; margin-top: 32px; }
    .mission-section h2 { color: #00bcd4; margin-bottom: 10px; }
    .mission-section p { color: #fff; font-size: 1.1rem; }
    .footer-lower { background: #000; color: #aaa; text-align: center; padding: 12px 0 8px 0; font-size: 0.95em; margin-top: 40px; }
    @media (max-width: 900px) { .deck-detail-main { flex-direction: column; gap: 18px; } }
    canvas#fluid-bg {
      position: fixed;
      top: 0;
      left: 0;
      z-index: -1;
      width: 100vw;
      height: 100vh;
      opacity: 0.7;
      pointer-events: none;
      filter: blur(1.5px) brightness(1.2) saturate(1.5);
      transition: opacity 0.3s;
    }
    .cart-sidebar {
      position: fixed;
      top: 0;
      right: -400px;
      width: 400px;
      height: 100vh;
      background: #181818;
      color: #fff;
      box-shadow: -4px 0 24px rgba(0,0,0,0.25);
      z-index: 2000;
      transition: right 0.3s cubic-bezier(.4,0,.2,1);
      display: flex;
      flex-direction: column;
      padding: 0;
      border-radius: 22px 0 0 22px !important;
    }
    .cart-sidebar.active {
      right: 0;
      display: flex !important;
    }
    .cart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 24px 24px 12px 24px;
      border-bottom: 1px solid #333;
    }
    .close-cart-btn {
      background: none;
      border: none;
      color: #fff;
      font-size: 2rem;
      cursor: pointer;
      transition: color 0.2s;
    }
    .close-cart-btn:hover {
      color: #c0c0c0;
    }
    .cart-items {
      flex: 1;
      overflow-y: auto;
      padding: 16px 24px;
    }
    .cart-item {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 18px;
      border-bottom: 1px solid #222;
      padding-bottom: 12px;
    }
    .cart-item img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 8px;
      background: #222;
    }
    .cart-item-info {
      flex: 1;
    }
    .cart-item-title {
      font-weight: 600;
      margin-bottom: 4px;
    }
    .cart-item-price {
      color: #c0c0c0;
      font-size: 0.95rem;
      margin-bottom: 6px;
    }
    .cart-item-qty {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .qty-btn {
      background: #222;
      color: #fff;
      border: none;
      border-radius: 4px;
      width: 28px;
      height: 28px;
      font-size: 1.1rem;
      cursor: pointer;
      transition: background 0.2s;
    }
    .qty-btn:hover {
      background: #c0c0c0;
      color: #000;
    }
    .remove-item-btn {
      background: none;
      border: none;
      color: #ff5252;
      font-size: 1.2rem;
      cursor: pointer;
      margin-left: 8px;
    }
    .cart-footer {
      padding: 18px 24px;
      border-top: 1px solid #333;
      background: #181818;
    }
    .cart-total {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 16px;
    }
    .checkout-btn {
      width: 100%;
      padding: 14px;
      background: #c0c0c0;
      color: #000;
      border: none;
      border-radius: 8px;
      font-weight: 700;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s;
    }
    .checkout-btn:hover {
      background: #fff;
    }
    .cart-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.45);
      z-index: 1999;
      transition: opacity 0.3s;
    }
    .cart-overlay.active {
      display: block;
    }
  </style>
</head>
<body>
  <canvas id="fluid-bg"></canvas>
  <header>
    <div class="logo">AroundCards</div>
    <nav>
      <a href="../pages/index2.html">Home</a>
      <a href="../pages/index2.html">Mazzi</a>
      <a href="../pages/about.html">Cardistry</a>
      <a href="../pages/storia.html">Storia</a>
      <a href="../pages/contact.html">Contatti</a>
      <a href="#" id="cart-icon"><i class="fas fa-shopping-cart"></i> <span id="cart-count">0</span></a>
    </nav>
  </header>
  <main class="deck-detail-main">
    <div class="deck-images">
      <img id="mainImg" src="silverdrop_logo.png" alt="Silverdrop principale" style="background:#fff;border:2px solid #c0c0c0;max-width:340px;width:100%;border-radius:14px;box-shadow:0 4px 32px #0008;margin-bottom:16px;">
      <div class="deck-thumbs">
        <img src="silverdrop_logo.png" alt="Silverdrop thumb" class="selected">
        <img src="s1.png" alt="Silverdrop thumb2">
        <img src="s2.png" alt="Silverdrop thumb3">
      </div>
    </div>
    <div class="deck-info">
      <h1>Silverdrop</h1>
      <div class="deck-desc">Silverdrop: il mazzo che dona acqua. Ogni acquisto contribuisce alla costruzione di pozzi per le popolazioni che ne hanno bisogno.</div>
      <ul class="deck-features">
        <li>Edizione solidale</li>
        <li>Finitura luxury</li>
        <li>Design ispirato all'acqua</li>
        <li>Packaging eco-friendly</li>
      </ul>
      <div class="deck-price">€29.95</div>
      <button class="add-to-cart" id="addToCartBtn">Aggiungi al carrello</button>
      <div class="deck-video">
        <iframe src="https://www.youtube.com/embed/8ZcmTl_1ER8" title="Silverdrop video presentazione" allowfullscreen></iframe>
      </div>
      <div class="mission-section">
        <h2>La missione Silverdrop</h2>
        <p>Acquistando Silverdrop contribuisci direttamente alla costruzione di pozzi d'acqua potabile in zone del mondo dove l'acqua è un bene prezioso. Una parte del ricavato viene devoluta a progetti umanitari per portare acqua e speranza a chi ne ha più bisogno.</p>
      </div>
    </div>
  </main>
  <div class="footer-lower">
    <p>© 2025 AroundPlayingCards.com | Tutti i diritti riservati</p>
  </div>
  <div id="cartSidebar" class="cart-sidebar" style="display:none">
    <div class="cart-header">
      <h3>Il tuo carrello</h3>
      <button id="closeCart" class="close-cart-btn" aria-label="Chiudi carrello">&times;</button>
    </div>
    <div class="cart-items"></div>
    <div class="cart-footer">
      <div class="cart-total">Totale: <span id="cartTotal">€0.00</span></div>
      <button id="checkoutBtn" class="checkout-btn">Procedi all'acquisto</button>
    </div>
  </div>
  <div id="cartOverlay" class="cart-overlay" style="display:none"></div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
  <script>
    // Cambio immagine principale al click sulle thumb
    document.querySelectorAll('.deck-thumbs img').forEach(function(thumb) {
      thumb.addEventListener('click', function() {
        document.getElementById('mainImg').src = this.src;
        document.querySelectorAll('.deck-thumbs img').forEach(img => img.classList.remove('selected'));
        this.classList.add('selected');
      });
    });
    // Animazione canvas che segue il mouse
    const canvas = document.getElementById('fluid-bg');
    const ctx = canvas.getContext('2d');
    let width = canvas.width = window.innerWidth;
    let height = canvas.height = window.innerHeight;
    let t = 0;
    let mouse = {x: width/2, y: height/2};
    window.addEventListener('mousemove', e => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
    });
    function drawFluid() {
      ctx.clearRect(0, 0, width, height);
      for (let i = 0; i < 180; i++) {
        // Direzione influenzata dal mouse
        const dx = (mouse.x - width/2) * 0.12;
        const dy = (mouse.y - height/2) * 0.12;
        const x = Math.sin(i + t * 0.004) * (200 + 40*Math.sin(t*0.01)) + width / 2 + dx;
        const y = Math.cos(i + t * 0.002) * (160 + 30*Math.cos(t*0.012)) + height / 2 + dy;
        const r = Math.floor(180 + 60 * Math.sin(i * 0.13 + t * 0.02));
        const g = Math.floor(120 + 100 * Math.cos(i * 0.11 + t * 0.018));
        const b = Math.floor(200 + 40 * Math.sin(i * 0.09 + t * 0.021));
        ctx.fillStyle = `rgba(${r},${g},${b},0.13)`;
        ctx.beginPath();
        ctx.arc(x, y, 70 + 10*Math.sin(i+t*0.01), 0, Math.PI * 2);
        ctx.fill();
      }
      t++;
      requestAnimationFrame(drawFluid);
    }
    drawFluid();
    window.addEventListener('resize', () => {
      width = canvas.width = window.innerWidth;
      height = canvas.height = window.innerHeight;
    });
    // Carrello sidebar condiviso
    const cartSidebar = document.getElementById('cartSidebar');
    const cartOverlay = document.getElementById('cartOverlay');
    const cartCountEl = document.getElementById('cart-count');
    const closeCartBtn = document.getElementById('closeCart');
    const checkoutBtn = document.getElementById('checkoutBtn');
    const cartItemsContainer = document.querySelector('.cart-items');
    const cartTotalEl = document.getElementById('cartTotal');
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    // Funzione per aggiungere Silverdrop al carrello
    function addToCart() {
      const product = {
        name: 'Silverdrop',
        price: 29.95,
        img: 'silverdrop_logo.png',
        qty: 1
      };
      // Cerca se già presente
      const idx = cart.findIndex(item => item.name === product.name);
      if (idx !== -1) {
        cart[idx].qty++;
      } else {
        cart.push(product);
      }
      saveCart();
      renderCart();
      updateCartCount();
      updateCartTotal();
      openCart();
    }

    document.getElementById('addToCartBtn').addEventListener('click', addToCart);

    function openCart() {
      cartSidebar.style.display = 'flex';
      cartSidebar.classList.add('active');
      cartOverlay.style.display = 'block';
      cartOverlay.classList.add('active');
    }
    function closeCart() {
      cartSidebar.classList.remove('active');
      cartSidebar.style.display = 'none';
      cartOverlay.classList.remove('active');
      cartOverlay.style.display = 'none';
    }
    document.getElementById('cart-icon').addEventListener('click', e => {
      e.preventDefault();
      openCart();
    });
    closeCartBtn.addEventListener('click', closeCart);
    cartOverlay.addEventListener('click', closeCart);
    function updateCartCount() {
      let count = cart.reduce((sum, item) => sum + item.qty, 0);
      cartCountEl.textContent = count;
    }
    function updateCartTotal() {
      let total = cart.reduce((sum, item) => sum + item.qty * item.price, 0);
      cartTotalEl.textContent = '€' + total.toFixed(2);
    }
    function saveCart() {
      localStorage.setItem('cart', JSON.stringify(cart));
    }
    function renderCart() {
      cartItemsContainer.innerHTML = '';
      if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<p style="color:#aaa">Il carrello è vuoto.</p>';
        return;
      }
      cart.forEach((item, idx) => {
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `
          <img src="${item.img}" alt="${item.name}">
          <div class="cart-item-info">
            <div class="cart-item-title">${item.name}</div>
            <div class="cart-item-price">€${item.price.toFixed(2)}</div>
            <div class="cart-item-qty">
              <button class="qty-btn" data-idx="${idx}" data-action="dec">-</button>
              <span>${item.qty}</span>
              <button class="qty-btn" data-idx="${idx}" data-action="inc">+</button>
              <button class="remove-item-btn" data-idx="${idx}" title="Rimuovi">&times;</button>
            </div>
          </div>
        `;
        cartItemsContainer.appendChild(div);
      });
      cartItemsContainer.querySelectorAll('.qty-btn').forEach(btn => {
        btn.onclick = function() {
          const idx = +btn.dataset.idx;
          if (btn.dataset.action === 'inc') cart[idx].qty++;
          else if (btn.dataset.action === 'dec' && cart[idx].qty > 1) cart[idx].qty--;
          saveCart();
          renderCart();
          updateCartCount();
          updateCartTotal();
        };
      });
      cartItemsContainer.querySelectorAll('.remove-item-btn').forEach(btn => {
        btn.onclick = function() {
          const idx = +btn.dataset.idx;
          cart.splice(idx, 1);
          saveCart();
          renderCart();
          updateCartCount();
          updateCartTotal();
        };
      });
    }
    checkoutBtn.addEventListener('click', function() {
      if (cart.length === 0) return alert('Il carrello è vuoto!');
      alert('Grazie per il tuo acquisto! (Checkout demo)');
      showConfetti();
      cart = [];
      saveCart();
      renderCart();
      updateCartCount();
      updateCartTotal();
      closeCart();
    });

    // Effetto coriandoli
    function showConfetti() {
      const confettiColors = ['#00bcd4', '#c0c0c0', '#fff', '#2196f3', '#26c6da'];
      const confettiCount = 80;
      const confettiContainer = document.createElement('div');
      confettiContainer.style.position = 'fixed';
      confettiContainer.style.left = '0';
      confettiContainer.style.top = '0';
      confettiContainer.style.width = '100vw';
      confettiContainer.style.height = '100vh';
      confettiContainer.style.pointerEvents = 'none';
      confettiContainer.style.zIndex = '3000';
      document.body.appendChild(confettiContainer);
      for (let i = 0; i < confettiCount; i++) {
        const conf = document.createElement('div');
        conf.style.position = 'absolute';
        conf.style.width = '12px';
        conf.style.height = '18px';
        conf.style.background = confettiColors[Math.floor(Math.random()*confettiColors.length)];
        conf.style.left = Math.random()*100 + 'vw';
        conf.style.top = '-30px';
        conf.style.opacity = 0.85;
        conf.style.transform = `rotate(${Math.random()*360}deg)`;
        conf.style.borderRadius = '3px';
        confettiContainer.appendChild(conf);
        // Animazione
        const fall = conf.animate([
          { transform: conf.style.transform, top: '-30px' },
          { transform: `rotate(${Math.random()*720}deg)`, top: (80+Math.random()*20)+'vh' }
        ], {
          duration: 1200 + Math.random()*1200,
          easing: 'cubic-bezier(.6,.2,.4,1)',
          fill: 'forwards'
        });
        fall.onfinish = () => conf.remove();
      }
      setTimeout(() => confettiContainer.remove(), 2200);
    }
    renderCart();
    updateCartCount();
    updateCartTotal();
  </script>
</body>
</html>
